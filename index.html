<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ØªØ³Ø¬ÙŠÙ„ Ø¨Ù„Ø§Ø¨Ù„</title>

<link rel="manifest" href="manifest.json">

<style>
body{
  font-family: Arial;
  direction: rtl;
  background:#f2f2f2;
  text-align:center;
}
.box, .card, .list{
  background:#fff;
  width:330px;
  margin:15px auto;
  padding:15px;
  border-radius:10px;
}
input,select,button{
  width:100%;
  padding:8px;
  margin:6px 0;
}
.card{ display:none; }
table{
  width:100%;
  border-collapse: collapse;
}
td,th{
  border:1px solid #ccc;
  padding:5px;
}
.print{
  background:#2196F3;
  color:white;
  border:none;
}
</style>
</head>

<body>

<div class="box">
<h3>Ø§Ø³ØªÙ…Ø§Ø±Ø© ØªØ³Ø¬ÙŠÙ„ Ø¨Ù„Ø§Ø¨Ù„</h3>

<input id="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">

<select id="age">
<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ø±</option>
<script>
for(let i=6;i<=15;i++) document.write(`<option>${i}</option>`);
</script>
</select>

<button onclick="register()">ØªØ³Ø¬ÙŠÙ„</button>
<p id="counter"></p>
</div>

<div class="card" id="card">
<h3 id="cname"></h3>
<p id="cage"></p>
<p>Ù„Ø§Ø¹Ø¨ Ø¨Ù„Ø§Ø¨Ù„ Ù…Ø¨ØªØ¯Ø¦</p>
<p id="ctime"></p>
<button class="print" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</button>
</div>

<div class="list">
<h4>ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h4>
<table>
<thead>
<tr><th>#</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø¹Ù…Ø±</th><th>Ø§Ù„ÙˆÙ‚Øª</th></tr>
</thead>
<tbody id="table"></tbody>
</table>
<button class="print" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
</div>

<script>
let max=32;
let data=JSON.parse(localStorage.getItem("players")||"[]");
updateTable();

function register(){
  if(data.length>=max){ alert("Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø¹Ø¯Ø¯"); return; }

  let name=document.getElementById("name").value||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…";
  let age=document.getElementById("age").value;
  if(!age){ alert("Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ø±"); return; }

  let time=new Date().toLocaleString("ar-SA");

  document.getElementById("cname").innerText=name;
  document.getElementById("cage").innerText="Ø§Ù„Ø¹Ù…Ø±: "+age;
  document.getElementById("ctime").innerText="ÙˆÙ‚Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„: "+time;
  document.getElementById("card").style.display="block";

  data.push({name,age,time});
  localStorage.setItem("players",JSON.stringify(data));
  updateTable();
}

function updateTable(){
  document.getElementById("counter").innerText=
    "Ø¹Ø¯Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª: "+data.length+"/32";

  let html="";
  data.forEach((p,i)=>{
    html+=`<tr>
      <td>${i+1}</td>
      <td>${p.name}</td>
      <td>${p.age}</td>
      <td>${p.time}</td>
    </tr>`;
  });
  document.getElementById("table").innerHTML=html;
}
</script>

</body>
</html>
